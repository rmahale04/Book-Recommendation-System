<!-- templates/edit_profile.html -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Edit Profile - {{ user.username }}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body{
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      min-height:100vh;
      margin:0;
      padding:40px 20px;
      color:#fff;
      position:relative;
      overflow-x:hidden;
    }
    
    /* Animated background particles */
    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(124, 58, 237, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 20%, rgba(102, 126, 234, 0.2) 0%, transparent 50%);
      animation: float 20s ease-in-out infinite;
      pointer-events: none;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-20px) scale(1.05); }
    }
    
    .card{
      max-width:750px;
      margin:0 auto;
      background:rgba(255,255,255,0.98);
      backdrop-filter:blur(20px);
      padding:45px 40px;
      border-radius:24px;
      box-shadow:0 20px 60px rgba(0,0,0,.25), 0 0 0 1px rgba(255,255,255,.1);
      animation:fadeInUp .6s ease;
      position:relative;
      overflow:hidden;
    }
    
    /* Decorative gradient overlay on card */
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: linear-gradient(90deg, #667eea, #764ba2, #8b5cf6);
      background-size: 200% 100%;
      animation: shimmer 3s linear infinite;
    }
    
    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    @keyframes fadeInUp{
      from{opacity:0;transform:translateY(30px) scale(0.95);}
      to{opacity:1;transform:translateY(0) scale(1);}
    }
    
    h2{
      margin:0 0 10px;
      font-size:32px;
      font-weight:700;
      background:linear-gradient(135deg,#667eea,#764ba2,#8b5cf6);
      background-size:200% 200%;
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      animation:gradientFlow 4s ease infinite;
    }
    
    @keyframes gradientFlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .subtitle {
      color: #6b7280;
      font-size: 15px;
      margin-bottom: 35px;
      font-weight: 400;
    }
    
    .form-group {
      margin-bottom: 24px;
      animation: slideIn 0.5s ease backwards;
    }
    
    .form-group:nth-child(1) { animation-delay: 0.1s; }
    .form-group:nth-child(2) { animation-delay: 0.15s; }
    .form-group:nth-child(3) { animation-delay: 0.2s; }
    .form-group:nth-child(4) { animation-delay: 0.25s; }
    .form-group:nth-child(5) { animation-delay: 0.3s; }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    label{
      display:flex;
      align-items:center;
      gap:8px;
      margin-bottom:10px;
      font-weight:600;
      color:#1f2937;
      font-size:15px;
      letter-spacing:0.3px;
    }
    
    label::before {
      content: '';
      width: 4px;
      height: 18px;
      background: linear-gradient(135deg, #8b5cf6, #667eea);
      border-radius: 2px;
    }
    
    input[type=text], textarea{
      width:100%;
      padding:14px 18px;
      border:2px solid #e5e7eb;
      border-radius:14px;
      font-family:inherit;
      font-size:15px;
      transition:all .3s ease;
      background:#fafafa;
      color:#1f2937;
    }
    
    input[type=text]:hover, textarea:hover {
      border-color:#c4b5fd;
      background:#fff;
    }
    
    input[type=text]:focus, textarea:focus{
      outline:none;
      border-color:#8b5cf6;
      background:#fff;
      box-shadow:0 0 0 4px rgba(139,92,246,.12), 0 4px 12px rgba(139,92,246,.15);
      transform:translateY(-1px);
    }
    
    textarea{
      resize:vertical;
      min-height:90px;
      line-height:1.6;
    }
    
    .actions{
      margin-top:35px;
      display:flex;
      gap:14px;
      padding-top:25px;
      border-top:2px solid #f3f4f6;
    }
    
    .btn{
      flex:1;
      display:inline-block;
      padding:14px 28px;
      border-radius:14px;
      border:none;
      cursor:pointer;
      font-weight:600;
      font-size:15px;
      text-decoration:none;
      transition:all .3s ease;
      text-align:center;
      position:relative;
      overflow:hidden;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }
    
    .btn:hover::before {
      width: 300px;
      height: 300px;
    }
    
    .btn-primary{
      background:linear-gradient(135deg,#8b5cf6,#7c3aed);
      color:#fff;
      box-shadow:0 4px 20px rgba(139,92,246,.4);
      position:relative;
      z-index:1;
    }
    
    .btn-primary:hover{
      box-shadow:0 6px 30px rgba(139,92,246,.5);
      transform:translateY(-2px);
    }
    
    .btn-primary:active{
      transform:translateY(0);
    }
    
    .btn:not(.btn-primary){
      background:#f3f4f6;
      color:#4b5563;
      border:2px solid #e5e7eb;
    }
    
    .btn:not(.btn-primary):hover{
      background:#fff;
      border-color:#8b5cf6;
      color:#8b5cf6;
      transform:translateY(-2px);
    }
    
    .error{
      color:#e11d48;
      font-size:13px;
      margin-top:8px;
      font-weight:500;
      display:flex;
      align-items:center;
      gap:6px;
      animation:shake 0.5s ease;
    }
    
    .error::before {
      content: '‚ö†';
      font-size: 16px;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
    
    /* Profile preview icon */
    .profile-icon {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      color: white;
      box-shadow: 0 8px 20px rgba(139,92,246,.3);
      animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    /* Responsive */
    @media (max-width: 600px) {
      .card {
        padding: 30px 25px;
        border-radius: 20px;
      }
      h2 {
        font-size: 26px;
      }
      .actions {
        flex-direction: column;
      }
      .btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="profile-icon">‚úèÔ∏è</div>
    <h2>Edit Profile</h2>
    <p class="subtitle">Update your personal information and preferences</p>
    
    <form method="post">
      <div class="form-group">
        <label>First name</label>
        <input type="text" name="first_name" value="{{ user.first_name }}" placeholder="Enter your first name">
        {% if errors.first_name %}<div class="error">{{ errors.first_name }}</div>{% endif %}
      </div>

      <div class="form-group">
        <label>Last name</label>
        <input type="text" name="last_name" value="{{ user.last_name }}" placeholder="Enter your last name">
        {% if errors.last_name %}<div class="error">{{ errors.last_name }}</div>{% endif %}
      </div>

      <div class="form-group">
        <label>Bio</label>
        <textarea name="bio" rows="3" placeholder="Write a short bio about yourself...">{{ user.bio or '' }}</textarea>
      </div>

      <div class="form-group">
        <label>About me</label>
        <textarea name="about_me" rows="4" placeholder="Tell us more about your interests and hobbies...">{{ user.about_me or '' }}</textarea>
      </div>

      <div class="form-group">
        <label>Profile image URL</label>
        <input type="text" name="profile_image_url" value="{{ user.profile_image_url or '' }}" placeholder="https://example.com/image.jpg">
      </div>

      <div class="actions">
        <button class="btn btn-primary" type="submit">üíæ Save Changes</button>
        <a class="btn" href="{{ url_for('profile_by_username', username=user.username) }}">‚ùå Cancel</a>
      </div>

      {% if errors.database %}<div class="error">{{ errors.database }}</div>{% endif %}
    </form>
  </div>
</body>
</html>
