<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReadNext - Your Personal Reading Companion</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    {% include "nav_page.html" %}
    <!-- Hero Section -->
    <main class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">Discover Your Next Great Read</h1>
            <p class="hero-subtitle">Personalized book recommendations powered by your unique reading preferences and our intelligent algorithm.</p>
            
            <div class="features-grid">
                <div class="feature-item">
                    <span class="feature-icon">üéØ</span>
                    <span class="feature-text">Personalized recommendations based on your reading history</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">üîç</span>
                    <span class="feature-text">Advanced search across multiple books</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">‚≠ê</span>
                    <span class="feature-text">Detailed reviews and ratings from fellow readers</span>
                </div>
                <div class="feature-item">
                    <span class="feature-icon">üìä</span>
                    <span class="feature-text">Track your reading progress and goals</span>
                </div>
            </div>

            <div class="cta-buttons">
                <a href="{{ url_for('recommendations') }}" class="btn-primary">Get Started</a>
                <a href="{{ url_for('view_books') }}" class="btn-secondary">Browse Books</a>
            </div>
        </div>

        <!-- Book Discovery Widget -->
        <div class="discovery-widget floating-animation">
            <h3 class="widget-title">Find Your Perfect Book</h3>
            
            <div class="search-box">
                <input type="text" class="search-input" placeholder="Search by title, author, or keyword..." id="searchInput" />
            </div>

            <div class="genre-tags">
                <span class="genre-tag" onclick="toggleGenre(this)">Fiction</span>
                <span class="genre-tag" onclick="toggleGenre(this)">Mystery</span>
                <span class="genre-tag" onclick="toggleGenre(this)">Romance</span>
                <span class="genre-tag" onclick="toggleGenre(this)">Sci-Fi</span>
                <span class="genre-tag" onclick="toggleGenre(this)">Biography</span>
                <span class="genre-tag" onclick="toggleGenre(this)">History</span>
                <span class="genre-tag" onclick="toggleGenre(this)">Fantasy</span>
                <span class="genre-tag" onclick="toggleGenre(this)">Self Help</span>
            </div>

            <button class="discover-btn" id="discoverBtn">
                ‚ú® Discover Books
            </button>
        </div>
    </main>
    <script>
        let selectedGenre = "";

        function toggleGenre(element) {
            // remove active class from all
            document.querySelectorAll(".genre-tag").forEach(tag => {
                tag.classList.remove("active");
            });

            // toggle selected
            if (selectedGenre === element.innerText) {
                selectedGenre = "";
            } else {
                selectedGenre = element.innerText;
                element.classList.add("active");
            }
        }

        document.getElementById("discoverBtn").addEventListener("click", function () {
            const searchText = document.getElementById("searchInput").value.trim();
            let query = "";

            if (searchText && selectedGenre) {
                query = searchText + " " + selectedGenre;
            } else if (searchText) {
                query = searchText;
            } else if (selectedGenre) {
                query = selectedGenre;
            }

            if (query) {
                window.location.href = `/books?q=${encodeURIComponent(query)}`;
            } else {
                window.location.href = "/books";
            }
        });

        // Optional: press Enter to search
        document.getElementById("searchInput").addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
                document.getElementById("discoverBtn").click();
            }
        });
    </script>
</body>
</html>
